-- users テーブル（H2 用、IDENTITY の位置を修正）
CREATE TABLE IF NOT EXISTS users (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  username VARCHAR(50) NOT NULL UNIQUE,
  password VARCHAR(100) NOT NULL,
  role VARCHAR(20),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- images テーブル
CREATE TABLE IF NOT EXISTS images (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  file_name VARCHAR(255) NOT NULL,
  file_path VARCHAR(1024) NOT NULL,
  owner_id VARCHAR(255),
  content_type VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  answer_kana VARCHAR(255)
);

-- results テーブル（クイズの正答時刻を保存）
CREATE TABLE IF NOT EXISTS results (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  participant_name VARCHAR(100) NOT NULL,
  answered_at TIMESTAMP,
  -- 正答した時刻（メッセージフォームで記録された時刻をアプリから挿入）
  correct BOOLEAN NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
